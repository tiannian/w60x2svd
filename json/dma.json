{
  "name": "dma",
  "version": "0.1",
  "description": "DMA",
  "base_address": 1073742848,
  "address_block": {
    "offset": 0,
    "size": 512,
    "usage": "Registers"
  },
  "registers": [
    {
      "name": "int_mask",
      "offset": 0,
      "description": "设置需要屏蔽的DMA 中断",
      "mode": "RW",
      "reset": 65535,
      "size": 32,
      "fields": [
        {
          "name": "reserved",
          "offset": 31,
          "width": 15,
          "description": "保留"
        },
        {
          "name": "channel7_transfer_done",
          "offset": 15,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel7_burst_done",
          "offset": 14,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel6_transfer_done",
          "offset": 13,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel6_burst_done",
          "offset": 12,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel5_transfer_done",
          "offset": 11,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel5_burst_done",
          "offset": 10,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel4_transfer_done",
          "offset": 9,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel4_burst_done",
          "offset": 8,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel3_transfer_done",
          "offset": 7,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel3_burst_done",
          "offset": 6,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel2_transfer_done",
          "offset": 5,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel2_burst_done",
          "offset": 4,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel1_transfer_done",
          "offset": 3,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel1_burst_done",
          "offset": 2,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel0_transfer_done",
          "offset": 1,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        },
        {
          "name": "channel0_burst_done",
          "offset": 0,
          "width": 1,
          "access": "RW",
          "description": "中断屏蔽，高有效。"
        }
      ]
    },
    {
      "name": "int_src",
      "offset": 4,
      "description": "指示当前DMA 的中断状态",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "reserved",
          "offset": 31,
          "width": 15,
          "description": "保留"
        },
        {
          "name": "channel7_transfer_done",
          "offset": 15,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel7_burst_done",
          "offset": 14,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        },
        {
          "name": "channel6_transfer_done",
          "offset": 13,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel6_burst_done",
          "offset": 12,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        },
        {
          "name": "channel5_transfer_done",
          "offset": 11,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel5_burst_done",
          "offset": 10,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        },
        {
          "name": "channel4_transfer_done",
          "offset": 9,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel4_burst_done",
          "offset": 8,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        },
        {
          "name": "channel3_transfer_done",
          "offset": 7,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel3_burst_done",
          "offset": 6,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        },
        {
          "name": "channel2_transfer_done",
          "offset": 5,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel2_burst_done",
          "offset": 4,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        },
        {
          "name": "channel1_transfer_done",
          "offset": 3,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel1_burst_done",
          "offset": 2,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        },
        {
          "name": "channel0_transfer_done",
          "offset": 1,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA 传输完成产生中断。"
        },
        {
          "name": "channel0_burst_done",
          "offset": 0,
          "width": 1,
          "access": "RW",
          "description": "中断状态，写 1 清 0。DMA burst 完成产生中断。"
        }
      ]
    },
    {
      "name": "uart_ch",
      "offset": 8,
      "description": "UART 外设时选择哪个UART",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "reserved",
          "offset": 31,
          "width": 29,
          "description": "保留"
        },
        {
          "name": "uart_dma_channel",
          "offset": 1,
          "width": 1,
          "access": "RW",
          "description": "选择：",
          "enumerated_value": {
            "name": "uart_dma_channel",
            "usage": "RW",
            "values": [
              {
                "name": "uart_dma_channel_0",
                "description": ": uart0  模块dma 通道 接入dma",
                "value": 0,
                "default": false
              },
              {
                "name": "uart_dma_channel_1",
                "description": ": uart1  模块dma 通道 接入dma",
                "value": 1,
                "default": false
              },
              {
                "name": "uart_dma_channel_2",
                "description": ": uart2/7816  模块dma 通道 接入dma",
                "value": 2,
                "default": false
              },
              {
                "name": "uart_dma_channel_3",
                "description": ":  保留",
                "value": 3,
                "default": false
              }
            ]
          }
        }
      ]
    },
    {
      "name": "reserved",
      "offset": 12,
      "size": 32,
      "fields": []
    },
    {
      "name": "src_addr",
      "offset": 16,
      "description": "DMA 传输的源地址",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "src_addr",
          "offset": 31,
          "width": 31,
          "access": "RW",
          "description": "非循环模式下，DMA 搬运的源地址，外设地址或内存地址"
        }
      ]
    },
    {
      "name": "dest_addr",
      "offset": 20,
      "description": "DMA 传输的目的地址",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "dest_addr",
          "offset": 31,
          "width": 31,
          "access": "RW",
          "description": "非循环模式下，DMA 搬运的目的地址，外设地址或内存地址"
        }
      ]
    },
    {
      "name": "src_wrap_addr",
      "offset": 24,
      "description": "循环模式下DMA 传输源地址",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "src_wrap_addr",
          "offset": 31,
          "width": 31,
          "access": "RW",
          "description": "循环模式下，DMA 搬运的源地址的起始地址，外设地址或内存地址"
        }
      ]
    },
    {
      "name": "dest_wrap_addr",
      "offset": 28,
      "description": "循环模式下DMA 传输目的地址",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "dest_wrap_addr",
          "offset": 31,
          "width": 31,
          "access": "RW",
          "description": "循环模式下，DMA 搬运的目的地址的起始地址，外设地址或内存地址"
        }
      ]
    },
    {
      "name": "wrap_size",
      "offset": 32,
      "description": "循环模式下DMA 循环边界",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "dest_size",
          "offset": 31,
          "width": 15,
          "access": "RW",
          "description": "循环模式下，DMA 目的地址循环长度。\rDMA 从起始地址依次递增搬运数据，当搬运数据字节数达到此设定值之后，会跳转到循环起始地址，从起始地址开始继续搬运数据"
        },
        {
          "name": "src_size",
          "offset": 15,
          "width": 15,
          "access": "RW",
          "description": "循环模式下，DMA 源地址循环长度。"
        }
      ]
    },
    {
      "name": "chnl_ctrl",
      "offset": 36,
      "description": "当前通道DMA 启动和停止",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "reserved",
          "offset": 31,
          "width": 29,
          "description": "保留"
        },
        {
          "name": "dma_stop",
          "offset": 1,
          "width": 1,
          "access": "RW",
          "description": "停止dma 操作，高有效。\rDMA 会在完成当前burst 操作后停止，并同时清除chnl_on。软件应根据chnl_on\r为 0 确定dma 已经完全停止。"
        },
        {
          "name": "chnl_on",
          "offset": 0,
          "width": 1,
          "access": "RW",
          "description": "启动当前通道DMA 转换，高有效。\rDma 完成后转换或设置停止后，自动清 0。"
        }
      ]
    },
    {
      "name": "dma_mode",
      "offset": 40,
      "description": "设置DMA 的工作方式",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "reserved",
          "offset": 31,
          "width": 24,
          "description": "保留"
        },
        {
          "name": "chain_link_en",
          "offset": 6,
          "width": 1,
          "access": "RW",
          "description": "链表方式下有效，表示 dma 在处理完第一个链表后，是否继续读取和处理后续链表。如果为 1，则更新链表中的next_desc_addr，并继续读取下一个链表，直到链表中 vld 为 0；如果为 0，则处理完成当前链表后即停止。"
        },
        {
          "name": "dma_sel",
          "offset": 5,
          "width": 3,
          "access": "RW",
          "description": "外设传输时，选择当前DMA 通道的外设类型。\r16 个dma_req 的选择。",
          "enumerated_value": {
            "name": "dma_sel",
            "usage": "RW",
            "values": [
              {
                "name": "dma_sel_0",
                "description": "uart rx dma req",
                "value": 0,
                "default": false
              },
              {
                "name": "dma_sel_1",
                "description": "uart tx dma req",
                "value": 1,
                "default": false
              },
              {
                "name": "dma_sel_2",
                "description": "pwm_cap0_req",
                "value": 2,
                "default": false
              },
              {
                "name": "dma_sel_3",
                "description": "pwm_cap1_req",
                "value": 3,
                "default": false
              },
              {
                "name": "dma_sel_4",
                "description": "LS_SPI rx dma req",
                "value": 4,
                "default": false
              },
              {
                "name": "dma_sel_5",
                "description": "LS_SPI tx dma req",
                "value": 5,
                "default": false
              },
              {
                "name": "dma_sel_6",
                "description": "SD_ADC chnl0 req",
                "value": 6,
                "default": false
              },
              {
                "name": "dma_sel_7",
                "description": "SD_ADC chnl1 req",
                "value": 7,
                "default": false
              },
              {
                "name": "dma_sel_8",
                "description": "SD_ADC chnl2 req",
                "value": 8,
                "default": false
              },
              {
                "name": "dma_sel_9",
                "description": "SD_ADC chnl3 req",
                "value": 9,
                "default": false
              },
              {
                "name": "dma_sel_a",
                "description": "SD_ADC chnl4 req",
                "value": 10,
                "default": false
              },
              {
                "name": "dma_sel_b",
                "description": "SD_ADC chnl5 req",
                "value": 11,
                "default": false
              },
              {
                "name": "dma_sel_c",
                "description": "SD_ADC chnl6 req",
                "value": 12,
                "default": false
              },
              {
                "name": "dma_sel_d",
                "description": "SD_ADC chnl7 req",
                "value": 13,
                "default": false
              },
              {
                "name": "dma_sel_e",
                "description": ": I2S RX req",
                "value": 14,
                "default": false
              },
              {
                "name": "dma_sel_f",
                "description": ": I2S TX req",
                "value": 15,
                "default": false
              }
            ]
          }
        },
        {
          "name": "chain_mode",
          "offset": 1,
          "width": 1,
          "access": "RW",
          "description": "",
          "enumerated_value": {
            "name": "chain_mode",
            "usage": "RW",
            "values": [
              {
                "name": "chain_mode_0",
                "description": "使用普通模式",
                "value": 0,
                "default": false
              },
              {
                "name": "chain_mode_1",
                "description": "使用链表模式",
                "value": 1,
                "default": false
              }
            ]
          }
        },
        {
          "name": "dma_mode",
          "offset": 0,
          "width": 1,
          "access": "RW",
          "description": "",
          "enumerated_value": {
            "name": "dma_mode",
            "usage": "RW",
            "values": [
              {
                "name": "dma_mode_0",
                "description": "软件方式。",
                "value": 0,
                "default": false
              },
              {
                "name": "dma_mode_1",
                "description": "硬件方式。",
                "value": 1,
                "default": false
              }
            ]
          }
        }
      ]
    },
    {
      "name": "dma_ctrl",
      "offset": 44,
      "description": "设置DMA 传输数据流",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "reserved",
          "offset": 31,
          "width": 7,
          "description": "保留"
        },
        {
          "name": "total_byte",
          "offset": 23,
          "width": 15,
          "access": "RW",
          "description": "总共需要操作的byte 个数。需要与data_size 配置相一致，即若果为字操作，则应该为配置为 4 的整数倍；如果为半字操作，则应该配置为 2 的整数倍。"
        },
        {
          "name": "burst_size",
          "offset": 7,
          "width": 1,
          "access": "RW",
          "description": "设置DMA 每次搬运多少个单位的数据\r当最后一次burst 大小超过剩余传输的个数时，使用burst 大小为剩余数据的大小。",
          "enumerated_value": {
            "name": "burst_size",
            "usage": "RW",
            "values": [
              {
                "name": "burst_size_0",
                "description": "burst 为 1",
                "value": 0,
                "default": false
              },
              {
                "name": "burst_size_1",
                "description": "burst 为 4",
                "value": 1,
                "default": false
              }
            ]
          }
        },
        {
          "name": "data_size",
          "offset": 6,
          "width": 1,
          "access": "RW",
          "description": "设置DMA 的搬运单位",
          "enumerated_value": {
            "name": "data_size",
            "usage": "RW",
            "values": [
              {
                "name": "data_size_0",
                "description": "byte",
                "value": 0,
                "default": false
              },
              {
                "name": "data_size_1",
                "description": "half_word",
                "value": 1,
                "default": false
              },
              {
                "name": "data_size_2",
                "description": "word",
                "value": 2,
                "default": false
              },
              {
                "name": "data_size_3",
                "description": "保留",
                "value": 3,
                "default": false
              }
            ]
          }
        },
        {
          "name": "dest_addr_inc",
          "offset": 4,
          "width": 1,
          "access": "RW",
          "description": "",
          "enumerated_value": {
            "name": "dest_addr_inc",
            "usage": "RW",
            "values": [
              {
                "name": "dest_addr_inc_0",
                "description": "每次操作后目的地址不变；",
                "value": 0,
                "default": false
              },
              {
                "name": "dest_addr_inc_1",
                "description": "每次操作后目的地址自动累加。",
                "value": 1,
                "default": false
              },
              {
                "name": "dest_addr_inc_2",
                "description": "保留",
                "value": 2,
                "default": false
              },
              {
                "name": "dest_addr_inc_3",
                "description": "循环操作，每次操作后目的地址自动累加,到达定义的循环边界跳转到循环起始地址。",
                "value": 3,
                "default": false
              }
            ]
          }
        },
        {
          "name": "src_addr_inc",
          "offset": 2,
          "width": 1,
          "access": "RW",
          "description": "",
          "enumerated_value": {
            "name": "src_addr_inc",
            "usage": "RW",
            "values": [
              {
                "name": "src_addr_inc_0",
                "description": "每次操作后源地址不变；",
                "value": 0,
                "default": false
              },
              {
                "name": "src_addr_inc_1",
                "description": "每次操作后源地址自动累加。",
                "value": 1,
                "default": false
              },
              {
                "name": "src_addr_inc_2",
                "description": "保留",
                "value": 2,
                "default": false
              },
              {
                "name": "src_addr_inc_3",
                "description": "循环操作，每次操作后源地址自动累加,到达定义的循环边界跳转到循环起始地址。",
                "value": 3,
                "default": false
              }
            ]
          }
        },
        {
          "name": "auto_reload",
          "offset": 0,
          "width": 1,
          "access": "RW",
          "description": "当完成当前DMA 搬运后，自动按当前DMA 配置重新下一次DMA 搬运。"
        }
      ]
    },
    {
      "name": "dma_status",
      "offset": 48,
      "description": "获取当前已传输的字节数",
      "mode": "RO",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "reserved",
          "offset": 31,
          "width": 15,
          "description": "保留"
        },
        {
          "name": "transfer_cnt",
          "offset": 15,
          "width": 15,
          "access": "RW",
          "description": "当前传输的字节个数。\r每次重新开启dma（chnl_on 置 1）清 0，并重新开始计数。"
        }
      ]
    },
    {
      "name": "desc_addr",
      "offset": 52,
      "description": "DMA 链表地址入口地址设置",
      "mode": "RW",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "desc_addr",
          "offset": 31,
          "width": 31,
          "access": "RW",
          "description": "链表使能时，作为链表的入口地址。每传输完成一次链表后，将下一个链表的基地址更新至此寄存器。"
        }
      ]
    },
    {
      "name": "cur_dest_addr",
      "offset": 56,
      "description": "当前DMA 操作的地址",
      "mode": "RO",
      "reset": 0,
      "size": 32,
      "fields": [
        {
          "name": "current_dest_addr",
          "offset": 31,
          "width": 31,
          "access": "RO",
          "description": "当前DMA 操作目的地址。\r当软件停止dma 时，可以通过查看此寄存器获悉dma 将要操作的目的地址。"
        }
      ]
    }
  ]
}